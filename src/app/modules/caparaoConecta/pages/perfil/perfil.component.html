<app-cabecalho />

<!-- O @defer agora espera o status ser 'concluido' -->
@defer (when statusCarregamento() === 'concluido') {

<!-- Usamos o valor do signal com dadosPessoais() -->
<app-component-perfil-dados
  [data]="dadosPessoais()"
  [IdUsuario]="user()?.id_pessoas"
  [idTipoUsuario]="user()?.id_tipo_usuarios"
></app-component-perfil-dados>

<app-component-default-perfil
  title="Sobre"
  [IdUsuario]="user()?.id_pessoas"
  [data]="dadosPessoais()?.sobre"
>
</app-component-default-perfil>

@if(role() === roleEnum.CANDIDATO) {
<app-perfil-candidato
  [IdUsuario]="user()?.id_pessoas"
  [experiencias]="experiencias()"
  [formacoes]="formacoes()"
  [cursos]="cursos()"
  [habilidades]="habilidades()"
>
</app-perfil-candidato>
} @if(role() === roleEnum.EMPRESA) {
<app-perfil-empresa [dadosEmpresa]="dadosPessoais()?.empresa">
</app-perfil-empresa>
} } @placeholder(minimum 1s) {
<app-spinner />
} @error {
<div class="error-message">
  <p>Erro ao carregar os dados do perfil.</p>
</div>
}

<app-footer tela="perfil"></app-footer>
