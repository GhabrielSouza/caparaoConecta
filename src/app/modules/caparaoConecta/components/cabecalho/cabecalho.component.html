<header (scroll)="onscroll()" [ngClass]="navbarFixed ? 'fixed' : 'nofixed'">
  <div class="header-container">
    <div class="header_logo">
      <a [routerLink]="['']">
        <img
          src="assets/imgs/logo.svg"
          alt="Logo do site Carapaó Conecta"
          class="header_logo_imagem"
        />
      </a>
    </div>

    <div class="header_aplicacao">
      @if(!user()) {
      <div class="header_aplicacao_acesso">
        <ul>
          <li><a routerLink="/login" class="login-btn">Entrar</a></li>
          <li><a (click)="openDialog()" class="signup-btn">Inscrever-se</a></li>
        </ul>
      </div>
      } @else {
      <div class="header_actions">
        <button class="btn-notificacoes">
          <mat-icon class="notificacao" matBadge="15">notifications</mat-icon>
        </button>

        <div class="menu-toggle">
          <input
            type="checkbox"
            id="menu-toggle"
            [checked]="isMenuOpen"
            (change)="toggleMenu()"
          />
          <label for="menu-toggle" class="hamburger">
            <span></span>
            <span></span>
            <span></span>
          </label>
        </div>
      </div>
      }
    </div>
  </div>

  @if(user(); as loggedUser) {
  <div class="side-menu" [class.menu-open]="isMenuOpen">
    <div class="menu-overlay" (click)="toggleMenu()"></div>

    <div class="menu-content">
      <div class="user-profile">
        <div class="profile-image-container">
          <img
            [src]="
              loggedUser.pessoa.imagem != null
                ? 'http://localhost:8000/img/pessoas/' +
                  loggedUser.pessoa.imagem
                : 'assets/imgs/perfil.svg'
            "
            alt="Foto do usuário"
            class="profile-image"
          />
        </div>
        <div class="profile-info">
          <h2>{{ loggedUser.pessoa.nome }}</h2>
          <p>{{ loggedUser.tipo_usuario.nome | titlecase }}</p>
        </div>
      </div>

      <nav class="menu-nav">
        <ul>
          <li>
            <a routerLink="/" (click)="toggleMenu()" class="menu-item">
              <img src="assets/icons/home.svg" alt="Home" />
              <span>Home</span>
            </a>
          </li>
          <li>
            <a routerLink="/perfil" (click)="toggleMenu()" class="menu-item">
              <img src="assets/icons/perfil.svg" alt="Perfil" />
              <span>Perfil</span>
            </a>
          </li>
          @if(loggedUser.tipo_usuario.nome === roleEnum.CANDIDATO ||
          loggedUser.tipo_usuario.nome === roleEnum.ADMIN) {
          <li>
            <a
              routerLink="/Minhas Vagas"
              (click)="toggleMenu()"
              class="menu-item"
            >
              <img src="assets/icons/perfil.svg" alt="Perfil" />
              <span>Minhas vagas</span>
            </a>
          </li>
          } @if( loggedUser.tipo_usuario.nome === roleEnum.CANDIDATO ||
          loggedUser.tipo_usuario.nome === roleEnum.ADMIN){
          <li>
            <a href="#" class="menu-item">
              <img src="assets/icons/empresa.svg" alt="Empresa" />
              <span>Empresas</span>
            </a>
          </li>
          } @if(loggedUser.tipo_usuario.nome === roleEnum.EMPRESA ||
          loggedUser.tipo_usuario.nome === roleEnum.ADMIN) {
          <li>
            <a href="#" class="menu-item">
              <img src="assets/icons/Candidato.svg" alt="Candidatos" />
              <span>Candidatos</span>
            </a>
          </li>
          <li>
            <a routerLink="/dashboard" (click)="toggleMenu()" class="menu-item">
              <img src="assets/icons/dashboard.svg" alt="Dashboard" />
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="#" class="menu-item">
              <img src="assets/icons/relatorio.svg" alt="Relatórios" />
              <span>Relatórios</span>
            </a>
          </li>
          <li>
            <a
              (click)="openDialogSelecionarVaga(); toggleMenu()"
              class="menu-item"
            >
              <img src="assets/icons/criarVaga.svg" alt="Criar vaga" />
              <span>Criar vaga</span>
            </a>
          </li>
          } @if( loggedUser.tipo_usuario.nome === roleEnum.ADMIN) {
          <li>
            <a routerLink="/cursos" (click)="toggleMenu()" class="menu-item">
              <img src="assets/icons/criarVaga.svg" alt="Criar vaga" />
              <span>Criar Cursos</span>
            </a>
          </li>

          <li>
            <a
              routerLink="/habilidades"
              (click)="toggleMenu()"
              class="menu-item"
            >
              <img src="assets/icons/criarVaga.svg" alt="Criar vaga" />
              <span>Criar Habilidades</span>
            </a>
          </li>
          }
        </ul>
      </nav>

      <div class="menu-footer">
        <button class="logout-btn btn btn-primary" (click)="logout()">
          <img src="assets/icons/sair.svg" alt="Sair" />
          <span>Sair</span>
        </button>
      </div>
    </div>
  </div>
  }
</header>

<!-- <header (scroll)="onscroll()" [ngClass]="navbarFixed ? 'fixed' : 'nofixed'">
  <div class="header-container">
    <div class="header_logo">
      <a [routerLink]="['']">
        <img
          src="assets/imgs/logo.svg"
          alt="Logo do site Carapaó Conecta"
          class="header_logo_imagem"
        />
      </a>
    </div>

    <div class="header_aplicacao">
      @if(role == roleEnum.GUEST) {
      <div class="header_aplicacao_acesso">
        <ul>
          <li><a routerLink="/login" class="login-btn">Entrar</a></li>
          <li><a (click)="openDialog()" class="signup-btn">Inscrever-se</a></li>
        </ul>
      </div>
      } @if(user?.tipo_usuario?.nome == roleEnum.ADMIN ||
      user?.tipo_usuario?.nome == roleEnum.CANDIDATO || user?.tipo_usuario?.nome
      == roleEnum.EMPRESA) {
      <div class="header_actions">
        <button class="btn-notificacoes">
          <mat-icon class="notificacao" matBadge="15">notifications</mat-icon>
        </button>

        <div class="menu-toggle">
          <input type="checkbox" id="menu-toggle" (change)="toggleMenu()" />
          <label for="menu-toggle" class="hamburger">
            <span></span>
            <span></span>
            <span></span>
          </label>
        </div>
      </div>
      }
    </div>
  </div>

  @if(user?.tipo_usuario?.nome == roleEnum.ADMIN || user?.tipo_usuario?.nome ==
  roleEnum.CANDIDATO || user?.tipo_usuario?.nome == roleEnum.EMPRESA) {
  <div class="side-menu" [class.menu-open]="isMenuOpen">
    <div class="menu-overlay" (click)="toggleMenu()"></div>

    <div class="menu-content">
      <div class="user-profile">
        <div class="profile-image-container">
          <img
            [src]="'assets/imgs/perfil.svg'"
            alt="Foto do usuário"
            class="profile-image"
          />
        </div>
        <div class="profile-info">
          <h2>NOME</h2>
          <p>Usuário</p>
        </div>
      </div>

      <nav class="menu-nav">
        <ul>
          <li>
            <a routerLink="/" (click)="toggleMenu()" class="menu-item">
              <img src="assets/icons/home.svg" alt="Home" />
              <span>Home</span>
            </a>
          </li>
          <li>
            <a routerLink="/perfil" (click)="toggleMenu()" class="menu-item">
              <img src="assets/icons/perfil.svg" alt="Perfil" />
              <span>Perfil</span>
            </a>
          </li>
          <li>
            <a href="#" class="menu-item">
              <img src="assets/icons/cursos.svg" alt="Cursos" />
              <span>Cursos</span>
            </a>
          </li>
          <li>
            <a href="#" class="menu-item">
              <img src="assets/icons/vagas.svg" alt="Vagas" />
              <span>Vagas</span>
            </a>
          </li>

          @if(role == roleEnum.EMPRESA || role == roleEnum.ADMIN) {
          <li>
            <a href="#" class="menu-item">
              <img src="assets/icons/empresa.svg" alt="Empresa" />
              <span>Empresa</span>
            </a>
          </li>
          <li>
            <a href="#" class="menu-item">
              <img src="assets/icons/Candidato.svg" alt="Candidatos" />
              <span>Candidatos</span>
            </a>
          </li>
          <li>
            <a routerLink="/dashboard" (click)="toggleMenu()" class="menu-item">
              <img src="assets/icons/dashboard.svg" alt="Dashboard" />
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="#" class="menu-item">
              <img src="assets/icons/relatorio.svg" alt="Relatórios" />
              <span>Relatórios</span>
            </a>
          </li>
          <li>
            <a
              (click)="openDialogSelecionarVaga(); toggleMenu()"
              class="menu-item"
            >
              <img src="assets/icons/criarVaga.svg" alt="Criar vaga" />
              <span>Criar vaga</span>
            </a>
          </li>
          }
        </ul>
      </nav>

      <div class="menu-footer">
        <button class="logout-btn btn btn-primary">
          <img src="assets/icons/sair.svg" alt="Sair" />
          <span>Sair</span>
        </button>
      </div>
    </div>
  </div>
  }
</header> -->
